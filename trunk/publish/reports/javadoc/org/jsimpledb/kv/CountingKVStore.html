<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_45) on Tue Apr 15 22:17:53 CDT 2014 -->
<title>CountingKVStore (Java Class Library API)</title>
<meta name="date" content="2014-04-15">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="CountingKVStore (Java Class Library API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CountingKVStore.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../org/jsimpledb/kv/KeyRange.html" title="class in org.jsimpledb.kv"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jsimpledb/kv/CountingKVStore.html" target="_top">Frames</a></li>
<li><a href="CountingKVStore.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.jsimpledb.kv</div>
<h2 title="Interface CountingKVStore" class="title">Interface CountingKVStore</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../org/jsimpledb/kv/KVStore.html" title="interface in org.jsimpledb.kv">KVStore</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../org/jsimpledb/kv/util/CountingKVStoreAdapter.html" title="class in org.jsimpledb.kv.util">CountingKVStoreAdapter</a>, <a href="../../../org/jsimpledb/kv/fdb/FoundationKVTransaction.html" title="class in org.jsimpledb.kv.fdb">FoundationKVTransaction</a>, <a href="../../../org/jsimpledb/kv/util/NavigableMapKVStore.html" title="class in org.jsimpledb.kv.util">NavigableMapKVStore</a></dd>
</dl>
<hr>
<br>
<pre>public interface <a href="../../../src-html/org/jsimpledb/kv/CountingKVStore.html#line.22">CountingKVStore</a>
extends <a href="../../../org/jsimpledb/kv/KVStore.html" title="interface in org.jsimpledb.kv">KVStore</a></pre>
<div class="block">Implemented by <a href="../../../org/jsimpledb/kv/KVStore.html" title="interface in org.jsimpledb.kv"><code>KVStore</code></a>s that support encoding a 64 bit counter in a key/value pair such that the counter
 can be efficiently <a href="../../../org/jsimpledb/kv/CountingKVStore.html#adjustCounter(byte[], long)">adjusted</a> by concurrent transactions without conflict.
 In practice this means no locking is required to increment or decrement the counter by some amount, as long as
 it's not necessary to actually directly read or write the counter value in the same transaction.

 <p>
 How counters are encoded is specific to the implementation. Clients needing to read or write counter values directly
 should use <a href="../../../org/jsimpledb/kv/CountingKVStore.html#decodeCounter(byte[])"><code>decodeCounter()</code></a> and <a href="../../../org/jsimpledb/kv/CountingKVStore.html#encodeCounter(long)"><code>encodeCounter()</code></a>, respectively.
 Counters are removed using the normal methods (i.e., <a href="../../../org/jsimpledb/kv/KVStore.html#remove(byte[])"><code>remove()</code></a> and <a href="../../../org/jsimpledb/kv/KVStore.html#removeRange(byte[], byte[])"><code>removeRange()</code></a>).
 </p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/jsimpledb/kv/CountingKVStore.html#adjustCounter(byte[], long)">adjustCounter</a></strong>(byte[]&nbsp;key,
                          long&nbsp;amount)</code>
<div class="block">Adjust the counter at the given key by the given amount.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../org/jsimpledb/kv/CountingKVStore.html#decodeCounter(byte[])">decodeCounter</a></strong>(byte[]&nbsp;value)</code>
<div class="block">Decode a counter value.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../org/jsimpledb/kv/CountingKVStore.html#encodeCounter(long)">encodeCounter</a></strong>(long&nbsp;value)</code>
<div class="block">Encode a counter value into a <code>byte[]</code> value suitable for use with <a href="../../../org/jsimpledb/kv/CountingKVStore.html#decodeCounter(byte[])"><code>decodeCounter()</code></a>
 and/or <a href="../../../org/jsimpledb/kv/CountingKVStore.html#adjustCounter(byte[], long)"><code>adjustCounter()</code></a>.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.jsimpledb.kv.KVStore">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.jsimpledb.kv.<a href="../../../org/jsimpledb/kv/KVStore.html" title="interface in org.jsimpledb.kv">KVStore</a></h3>
<code><a href="../../../org/jsimpledb/kv/KVStore.html#get(byte[])">get</a>, <a href="../../../org/jsimpledb/kv/KVStore.html#getAtLeast(byte[])">getAtLeast</a>, <a href="../../../org/jsimpledb/kv/KVStore.html#getAtMost(byte[])">getAtMost</a>, <a href="../../../org/jsimpledb/kv/KVStore.html#put(byte[], byte[])">put</a>, <a href="../../../org/jsimpledb/kv/KVStore.html#remove(byte[])">remove</a>, <a href="../../../org/jsimpledb/kv/KVStore.html#removeRange(byte[], byte[])">removeRange</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="encodeCounter(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encodeCounter</h4>
<pre>byte[]&nbsp;<a href="../../../src-html/org/jsimpledb/kv/CountingKVStore.html#line.31">encodeCounter</a>(long&nbsp;value)</pre>
<div class="block">Encode a counter value into a <code>byte[]</code> value suitable for use with <a href="../../../org/jsimpledb/kv/CountingKVStore.html#decodeCounter(byte[])"><code>decodeCounter()</code></a>
 and/or <a href="../../../org/jsimpledb/kv/CountingKVStore.html#adjustCounter(byte[], long)"><code>adjustCounter()</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>value</code> - desired counter value</dd>
<dt><span class="strong">Returns:</span></dt><dd>encoded counter value</dd></dl>
</li>
</ul>
<a name="decodeCounter(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decodeCounter</h4>
<pre>long&nbsp;<a href="../../../src-html/org/jsimpledb/kv/CountingKVStore.html#line.41">decodeCounter</a>(byte[]&nbsp;value)</pre>
<div class="block">Decode a counter value.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>value</code> - encoded counter value</dd>
<dt><span class="strong">Returns:</span></dt><dd>decoded counter value</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>value</code> is not a valid counter value</dd>
<dd><code><a href="http://download.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</a></code> - if <code>value</code> is null</dd></dl>
</li>
</ul>
<a name="adjustCounter(byte[], long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>adjustCounter</h4>
<pre>void&nbsp;<a href="../../../src-html/org/jsimpledb/kv/CountingKVStore.html#line.62">adjustCounter</a>(byte[]&nbsp;key,
                 long&nbsp;amount)</pre>
<div class="block">Adjust the counter at the given key by the given amount.

 <p>
 This operation should behave in a lock-free manner, so that concurrent transactions can invoke it without
 conflict. However, if <code>key</code> is read or written to in this transaction, then this behavior may no
 longer be guaranteed.
 </p>

 <p>
 If there is no value associated with <code>key</code>, or <code>key</code>'s value is not a valid counter encoding as
 would be acceptable to <a href="../../../org/jsimpledb/kv/CountingKVStore.html#decodeCounter(byte[])"><code>decodeCounter()</code></a>, then how this operation affects <code>key</code>'s
 value, if at all, is undefined.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - key</dd><dd><code>amount</code> - amount to adjust counter value by</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</a></code> - if <code>key</code> is null</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CountingKVStore.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../org/jsimpledb/kv/KeyRange.html" title="class in org.jsimpledb.kv"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/jsimpledb/kv/CountingKVStore.html" target="_top">Frames</a></li>
<li><a href="CountingKVStore.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
